### Tableau笔记

[toc]

> 数据可视化工具，我们可以在Tableau的可视化社区学习各种顶尖的可视化方案

- **数据赋能**：让业务一线也可以轻松使用最新数据

  > 可以将数据在线发布
  >
  > 看板可以自动更新数据
  >
  > 可以下载数据
  >
  > 邮箱订阅，数据预警功能
  >
  > 可以让有权限的业务在线上编辑仪表盘

- **数据探索**：通过统计分析和数据可视化，从数据发现问题，用数据验证假设

  > 支持亿级数据的连接和处理
  >
  > 自由地对字段进行各种计算
  >
  > 拖拽就可以轻松制作图表
  >
  > 数据可以随意聚合下钻
  >
  > 图标类型可以灵活转换
  >
  > 内置算法智能建模

#### 名词解析

- 自然曝光量：总曝光量-*`cpc`*曝光量；即未花钱，平台自己带来的曝光量
- *`roi`*：投入产出比；实收*`roi`*=实收/*`cpc`*总费用
- *`order_15D`*：表示这个用户在过去15天内的下单数量（区分新用户与老用户）
- 服务费：平台抽成

#### 1、数据连接

##### 1.1、本地文件

- *`csv`*数据连接到文本文件
- *`xls/xlsx`*文件连接到Excel
- *`Json`*文件

##### 1.2、数据库

> 下载数据库对应的驱动后，填写地址等参数连接到对应数据库

#### 2、数据加载

- 默认使用智能连接，只需选择连接所用的数据字段即可
- 连接所用的字段可以通过函数进行计算和编辑
- 表格之间的来连接原理，*`SQL`*中会详细讲解（类似于*`SQL`*的*`out join`*操作，完全外连接）

#### 3、本项目操作

##### 3.1、连接操作

- 先连接到*`shop`*，然后拖拽*`cpc`*，选择连接字段：

  > 门店id=门店ID
  >
  > 日期=日期

- 继续拖拽*`orders`*，先于*`shop`*先连，选择连接字段

  > 门店id=门店ID
  >
  > 日期=下单日期

连接方式：**实时与数据提取区别**

- 实时：根据源数据动态变化，源数据变化即图表更新
- 数据提取：将源数据存储到Tableau内置数据中，源数据变化若未再次进行数据提取操作，图表暂不更新--->保存到**hyper文件**中

##### 3.2、提取方式

> 数据提取的编辑页面涉及到增量刷新的选项---->涉及到数据量特别大的时候才进行使用

**对工作表进行保存**：

- *`twb`*文件格式：不含有数据
- *`twbx`*文件格式：含有数据源，一打开文件即可看到数据源

**筛选器添加**：筛选器可以对目标数据源进行筛选操作--->数据源特别大，且需要分类管理时即可添加筛选器

##### 3.3、数据处理

- 可以查看数据，进行排序、重命名、拆分、数据格式改变等操作
- 这些操作在作图界面也可以完成

```
理解本次项目数据：
1、shop表数据有2385行
	数据从19年8月21号-20年9月25日
	有空值是因为当天没开店
2、cpc表有1177行
	数据从19年10月28日-20年9月25日
	部分数据与shop表相同
3、orders表有4419行
	数据从20年7uie28日-20年9月4日
	并且只有一家门店的数据
```

##### 3.4 数据可视化原理

> 人类是天生的视觉优势动物，看图比看数字快；

数据变成图标的过程就是数据映射到视觉图形的过程

**对于可视化来说，数据有【维度】和【度量】两类型，【度量】映射图形，【维度】负责区分**：

- **数值型变量【度量】Measures**：
  - 一般是由数字组成的变量；例如：成交金额，用户数，点击量
  - 数值变量可以进行计算，并基于计算结果的大小表示图表的面积大小、条形长短、颜色深浅等可以量化的视觉元素
- **类别型变量【维度】Dimensions**：
  - 类别变量包含有限的类别数或可区分组数（数值变量过多时需要进行分组）；例如：用户ID、性别、来源渠道
  - 类别变量主要用来对数值变量的计算结果进行区分，表现为图表的颜色种类、图形位置、分类方式等难以量化的视觉元素
  - 只能进行计算和分布等简单计算

Tableau会自动区分变量的类型：

<img src="../Assets/Tableau.png" style="zoom:50%;" />上方的部分为维度型变量，下方的为度量型；颜色具有区分，上方（**蓝色**）为离散型变量，下方（**绿色**）为连续性变量

###### 数据可映射的图像类型

- 位置

  > 位置是通过将两个【度量】分别作为x坐标和y坐标确认某一【维度】变量的位置，从而形成空间关系来表现该【维度】变量的分布和趋势；例如：x坐标表示人均收入【度量】，y坐标表示人均寿命【度量】，每一个点代表一个国家【维度】，这时我们就能看到各个国家的发展水平分布
  >
  > <img src="https://api2.mubu.com/v3/document_image/efe08660-63be-4c63-9f54-5b4994267c82-1105051.jpg" style="zoom:50%;" />

  基于位置表达的散点图主要有以下四种数据规律

  ![](https://api2.mubu.com/v3/document_image/e83904aa-71c0-4eae-9c5b-6e13a5afd9e5-1105051.jpg)

- 长度

  > 长度是直接以图形的长度来衡量【度量】的大小，并以【维度】做区分，以此实现各【维度】下对【度量】的对比分析；例如：以地区【维度】做区分，比较各地区的销售额【度量】大小
  >
  > <img src="https://api2.mubu.com/v3/document_image/b99b98df-ca3e-457d-ad58-1445c2ee29d5-1105051.jpg" style="zoom:50%;" />

- 角度

  > 角度和弧长都是用【度量】的大小直接衡量，表现细分【维度】和整体间的关系；例如：展现某一个班级里男女生【维度】的人数【度量】比例
  >
  > 注意：弧长相比于角度可以更加直接地看出部分之间的大小比较关系，从功能性上看圆环图要优于饼图
  >
  > <img src="https://api2.mubu.com/v3/document_image/ff37def0-2cec-4309-9a3f-8c4c45abb174-1105051.jpg" style="zoom:50%;" />

- 方向

  > 方向是对趋势的描述，以折线图最为典型，以时间【维度】作为横轴，表现各时间【维度】下某一【度量】的高低变化，高低之间的连线就形成了方向；例如：以月【维度】作为横轴，统计澳大利亚的人均二氧化碳排放量【度量】
  >
  > <img src="https://api2.mubu.com/v3/document_image/9c354705-840c-4c02-ba09-29426577a7d6-1105051.jpg" style="zoom:50%;" />

- 形状

  > 形状主要用于在多组数据分析时区别组别【维度】，我们在日常使用时又称之为标记，比如散点图和折线图中的形状：在散点图里使用三种形状来表现三个各自离散的数据群
  >
  > <img src="https://api2.mubu.com/v3/document_image/8e0ef7de-06d9-4a01-b221-dccde4fcb0c7-1105051.jpg" style="zoom:50%;" />
  >
  > 形状也可以表示数值的类型、系列和组别，比如折线图中各系列用多种不同的形状标记
  >
  > <img src="https://api2.mubu.com/v3/document_image/d74f59ef-b637-4182-bd4a-147b73940f8e-1105051.jpg" style="zoom:50%;" />

- 面积和体积

  > 面积体积越大则表示【度量】越大。长度、面积、体积都可以表示数值的大小。二维平面通常用圆形和矩形，三维空间一般用立方体或球体

- 颜色和深浅

  > 饱和度和色调是两个颜色的关键要素，既可以用来区分【维度】也可以用来表示【度量】数值的高低；例如：使用颜色展现数据的典型图表热力图，通过填色，热力图能用颜色的饱和度或者色调差别来展示数值在特定地理区域（或者页面区域）的分布
  >
  > /热力图：串串香在成都的分布/((!!!!!!!真香，想回四川了))
  >
  > ![](https://api2.mubu.com/v3/document_image/ff5ffad2-41e1-4039-97b3-63139af7649b-1105051.jpg)

**在很多可视化规范都沿用这份清单，清单显示在可视化设计中，位置是最为精确的元素，长度其次，然后是角度和方向。**

<font color=red>依次对应数据可视化领域的四大金刚：散点图、柱状图/条形图、饼图、折线图</font>

###### 可视化字典

![](https://api2.mubu.com/v3/document_image/bb2abe83-e004-4fc5-96a7-976426a108ed-1105051.jpg)

##### 3.5、使用Tableau将数据转化为图表

